---
import type {CollectionEntry} from "astro:content"
import BaseHead from "../components/BaseHead.astro"
import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"
import EntryBar from "../components/EntryBar.astro"
import EleventyCherriesBaseHead from "../components/EleventyCherriesBaseHead.astro"

type Props = CollectionEntry<"eleventyCherries">["data"] & {
	id: string
	collection: string
}

const {title, description, date, id, collection} = Astro.props
const url = new URL(id, import.meta.env.SITE)
---

<html lang="en-CA">
	<head>
		<EleventyCherriesBaseHead title={title} description={description} />
	</head>

	<body>
		<Header />
		<main class="main">
			<article class=`slug-${id.replaceAll("/", "-").slice(0, -1)} h-entry`>
				<EntryBar {...Astro.props} />
				<header class="entry-header">
					<h1 class="p-name">{title}</h1>
				</header>
				<div class="e-content">
					<slot />
				</div>
			</article>
		</main>
		<Footer />

		<script>
			declare global {
				interface Window {
					withAutomergeRepo: (
						fn: (
							repo: import("@automerge/automerge-repo").Repo,
							AutomergeRepo: typeof import("@automerge/automerge-repo")
						) => void
					) => void
					repo?: import("@automerge/automerge-repo").Repo
					AutomergeRepo?: typeof import("@automerge/automerge-repo")
				}
			}
		</script>
	</body>
</html>
