---
import {type CollectionEntry, getCollection} from "astro:content"
import Entry from "../layouts/entry-layout.astro"
import EleventyCherriesEntry from "../layouts/eleventy-cherries-entry.astro"
import {render} from "astro:content"

export async function getStaticPaths() {
	const entries = await getCollection("entries")
	const eleventyEntries = await getCollection("eleventyCherries")
	return [
		...entries.map(post => ({
			params: {slug: post.id},
			props: post,
		})),
		...eleventyEntries.map(post => ({
			params: {slug: post.id},
			props: post,
		})),
	]
}
type Props = CollectionEntry<"entries" | "eleventyCherries">

const post = Astro.props
const {Content} = await render(post)
---

{
	post.collection === "eleventyCherries" ? (
		<EleventyCherriesEntry
			{...post.data}
			id={post.id}
			collection="eleventyCherries">
			<Content />
		</EleventyCherriesEntry>
	) : (
		<Entry {...post.data} id={post.id} collection={post.collection}>
			<Content />
		</Entry>
	)
}
